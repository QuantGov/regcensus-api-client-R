<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>regcensusAPI • regcensusAPI</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="regcensusAPI">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">regcensusAPI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/regcensusAPI.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>regcensusAPI</h1>
            
      
      
      <div class="hidden name"><code>regcensusAPI.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(regcensusAPI)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#&gt; Welcome to RegCensus API - Pulling initial data</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; Registered S3 method overwritten by 'R.oo':</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt;   method        from       </span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt;   throw.default R.methodsS3</span></a></code></pre></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>RegCensusAPI is an API client that connects to the RegData regulatory restrictions data by the Mercatus Center at George Mason University. RegData uses machine learning algorithms to quantify the number of regulatory restrictions in a jurisdiction. Currently, RegData is available for three countries - Australia, Canada, and the United States. In addition, there are regulatory restrictions data for jurisdictions (provinces in Canada and states in Australia and US) within these countries. You can find out more about RegData from <a href="http://www.quantgov.org" class="uri">http://www.quantgov.org</a>.</p>
<p>This R API client connects to the api located at at the <a href="https://api.quantgov.org/swagger-ui.html">QuantGov website</a>. More advanced users who want to interact with the API directly can use the link above to pull data from the RegData API. Python users can access the same features provided in this package in the python package <strong>regcensus</strong>.</p>
</div>
<div id="structure-of-the-api" class="section level2">
<h2 class="hasAnchor">
<a href="#structure-of-the-api" class="anchor"></a>Structure of the API</h2>
<p>The API organizes data around <strong>topics</strong>, which are then divided into <strong>series</strong>. Within each series are <strong>values</strong>, which are the ultimate elements of interest. Values are available by three sub-groups: agency, industry, and occupation. Presently, there are no series with occupation subgroup. However, these are available for future use. Topics broadly define the data available. For example, RegData for regulatory restrictions is falls under the broad topic “Regulatory Restrictions.” Within Regulatory Restrictions topic, there are a number of series available. These include Total Restrictions, Total Wordcount, Total “Shall,” etc.</p>
<p>A fundamental concept in RegData is the <strong>document</strong>. In RegData, a set of documents represents a body of text (or corpus) for which we have produced regulatory restriction counts. For example, to produce data on regulatory restrictions imposed by the US Federal government, RegData uses the Code of Federal Regulations (CFR) as the source documents. Within the CFR, RegData identifies a unit of regulation as the title-part combination. The CFR is organized into 50 titles, and within each title are parts, which could have subparts, but not always. Under the parts are sections. Determining this unit of analyses is critical for the context of the data produced by RegData. Producing regulatory restriction data for US states follows the same strategy but uses the state-specific regulatory code.</p>
<p>In requesting data through the API, you must specify the document type and the indicate a preference for <em>summary</em> or <em>document-level</em>. By default, RegCensus API returns summarized data for the period of interest. This means that if you do not specify the the <em>summary</em> preference, you will receive the summarized data for a period. The <strong>list_series_period</strong> helper function (described below) returns the periods available for each series.</p>
<p>RegCensus API defines a number of periods depending on the series. For example, the total restrictions series of Federal regulations uses two main periods: daily and annual. The daily data produces the number of regulatory restrictions issued on a particular date by the US Federal government. The same data are available on an annual basis.</p>
<p>There are six helper functions to retrieve information about these key components of regdata. These functions provider the following information: topics, documents, jurisdictions, series, agencies, and years with data. The list functions begin with <strong>list</strong>. For example, to view the list of topics call <strong>list_topics</strong>. When an topic id parameter is supplied, the function returns the details about a specific topic.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co">#list_topics()</span></a></code></pre></div>
<p>Each topic comprises one or more <em>series</em>. The <strong>list_series</strong> function returns the list of all series when no series id is provided.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co">#list_series(id = 91)</span></a></code></pre></div>
<p>You can request the series under a particular topic by passing the topic id as paramter to the <strong>list_series</strong> function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co">#list_series(by='all')</span></a></code></pre></div>
<p>The <strong>list_series</strong> function takes two parameters: the series id and the subset of data - one of “all”, “jurisdiction”, “topic”, “agency”, or “industry”. When any of the subset options must be used with the id, where the id represents an id within the subset. For example, list_series(id=1,by=‘agencies’) will return the list of series for agency with ID 1.</p>
<p>There are other helper functions that give you a tour around RegData. To see the jurisdictions with data in RegData, call <strong>list_jurisdiction</strong>. This function returns the complete list in a list format.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#list_jurisdictions(jurisdiction = 38)</span></a></code></pre></div>
<p>The <strong>list_series_period</strong> function returns a list of all seriesa nd the years with data available. The output from this function can serve as a reference for the valid values that can be passed to parameters in the <strong>get_values</strong> function. The number of records returned is the unique combination of series and jurisdictions that are available in RegData.The function takes the optional argument jurisdiction id.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co">#list_series_period(jurisdiction = 38)</span></a></code></pre></div>
</div>
<div id="metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#metadata" class="anchor"></a>Metadata</h2>
<p>The __get_*__ functions return the details about RegData metadata. These metadata are not included in the <strong>get_values</strong> functions that will be described later.</p>
<div id="jurisdictions" class="section level3">
<h3 class="hasAnchor">
<a href="#jurisdictions" class="anchor"></a>Jurisdictions</h3>
<p>Use the <strong>get_jurisdiction</strong> function to return a data frame with all the jurisdictions. When you supply the jurisdiction ID parameter, the function returns the details of just that jurisdiction. Use the output from the <strong>get_jurisdiction</strong> function to merge with data from the <strong>get_values</strong> function.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">#get_jurisdictions(38)</span></a></code></pre></div>
</div>
<div id="agencies" class="section level3">
<h3 class="hasAnchor">
<a href="#agencies" class="anchor"></a>Agencies</h3>
<p>The <strong>get_agencies</strong> function returns a data frame of all agencies with data in RegData. If an ID is supplied, the data frame returns the details about a single agency specified by the id. The data frame includes characteristics of the agencies. Currently, agency data are only available for federal RegData.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co">#get_agencies()</span></a></code></pre></div>
<p>Use the value of the agency_id field when pulling values with the <strong>get_values</strong> function.</p>
</div>
<div id="industries" class="section level3">
<h3 class="hasAnchor">
<a href="#industries" class="anchor"></a>Industries</h3>
<p>The <strong>get_industries</strong> function returns a data frame of industries with data in the API. Presently the only classification system available is the North American Industry Classification System (NAICS). NAICS is used for both countries in North America and Australia, even the latter uses the Australia and New Zealand Standard Industrial Classification (ANZSIC) system. Presently, industry regulations for Australia are based on the NAICS. RegData expands to other countries, the industry codes will be country specific as well as contain mapping to the Standard Industry Codes (SIC) system.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co">#get_industries(38)</span></a></code></pre></div>
</div>
</div>
<div id="values" class="section level2">
<h2 class="hasAnchor">
<a href="#values" class="anchor"></a>Values</h2>
The <strong>get_values</strong>_ function is the primary function for obtaining RegData from the RegCensus API. The function takes the following parameters (required fields are in bold and optional parameters are italicized):
<li>
<em>list of jurisdiction ids, using the ‘c’ function, for example, c(1,2)</em>
</li>
<li>
<em>list of series ids</em>
</li>
<li>
<em>list of years</em>
</li>
<li>
<em>list of agencies</em>
</li>
<li>
<em>list of industries</em>
</li>
<li>
<em>dateIsRange</em> - specify if the list of years provided for the parameter years is a range. Default is TRUE
</li>
<p>In the example below, we are interested in the total number of restrictions and total numbe rof words (get_topics(1)) for the US (get_jurisdictions(38)) for the period 2010 to 2018.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co">#vals &lt;-get_values(jurisdiction = 38, series = c(1,2), time = c(2010,2018))</span></a></code></pre></div>
<div id="values-by-subgroup" class="section level3">
<h3 class="hasAnchor">
<a href="#values-by-subgroup" class="anchor"></a>Values by Subgroup</h3>
<p>You can obtain data for any of the three subgroups for each series - agencies, industries, and occupations (when they become available).</p>
<div id="values-by-agencies" class="section level4">
<h4 class="hasAnchor">
<a href="#values-by-agencies" class="anchor"></a>Values by Agencies</h4>
<p>To obtain the restrictions for a specific agency (or agencies), the series id supplied must be in the list of available series by agency. To recap, the list of available series for an agency is available via the <strong>list_series(id,by=‘agency’)</strong> function, and the list of agencies with data is available via <strong>get_agencies</strong> function.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co">#Identify all agencies</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co">#get_agencies()</span></a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#Find the available series for this agency, suppose agency_ids 81 and 84</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#list_series(id=91, by='agencies')</span></a>
<a class="sourceLine" id="cb11-6" title="6"></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">##Call the get_values() for this agency and series 91 and 92</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#get_values(jurisdiction = 38, series = c(91,92), time = c(1990,2018), agency = c(81,84))</span></a></code></pre></div>
</div>
<div id="values-by-agency-and-industry" class="section level4">
<h4 class="hasAnchor">
<a href="#values-by-agency-and-industry" class="anchor"></a>Values by Agency and Industry</h4>
<p>Some agency series may also have data by industry. For example, under the Total Restrictions topic, RegData includes the industry-relevant restrictions, which estimates the number of restrictions that apply to a given industry. These are available in both the main series - Total Restrictions, and the sub-group Restrictions by Agency.</p>
<p>To pull industry-relevant restrictions for an agency, call <strong>get_agencies</strong> with the <em>industry</em> variable. The industry variable is of type string, and valid values include the industry codes specified in the classification system obtained by calling the <strong>get_industries(jurisdiction)</strong> function.</p>
<p>In the example below, the series 92 (Restrictions by Agency and Industry), we can request data for the two industries 111 and 33 by the following code snippet.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co">#get_values(jurisdiction = 38, series = c(92), time = c(1990,2000), industry = c('111','33'), agency = 66)</span></a></code></pre></div>
</div>
</div>
<div id="merging-with-metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#merging-with-metadata" class="anchor"></a>Merging with Metadata</h3>
<p>To minimize the network bandwidth requirements to use RegCensusAPI, the data returned by <strong>get_values</strong> functions contain very minimal metadata. Once you pull the values by <strong>get_values</strong>, you can use various R packages to include the metadata.</p>
<p>Suppose we want to attach the agency names and other agency characteristics to the data from the last code snippet. First be sure to pull the list of agencies into a separate data frame. Then merge with the values data frame. The key for matching the data will be the <em>agency_id</em> column.</p>
<p>Using the <strong>dplyr</strong> package, we can merge the agency data with the values data as in the code snippet below. This code function assumes you have loaded the <em>dplyr</em> and <em>pander</em> packages. For more information about both of these packages, run the ‘help’ commands (? or help(dplyr)).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co">#require(dplyr)</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co">#require(pander)</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#agencies &lt;- get_agencies()</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#agency_by_industry &lt;- get_values(jurisdiction = 38,</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#                                 series = c(92), time = c(1990,2000), </span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#                                 industry = c('111','33'), </span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#                                 agency = c(66,111))</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#agency_restrictions_ind &lt;- agency_by_industry %&gt;%</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#  dplyr::left_join(agencies, by=c('agency_agency_id'='agency_id'))</span></a>
<a class="sourceLine" id="cb13-10" title="10"></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#pander::pandoc.table(agency_restrictions_ind)</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#structure-of-the-api">Structure of the API</a></li>
      <li><a href="#metadata">Metadata</a></li>
      <li><a href="#values">Values</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kofi Ampaabeng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
